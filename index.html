<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Barcode Generator</title>
<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }
  body, html { height: 100%; background: #121212; display: flex; justify-content: center; align-items: flex-start; padding:20px; color: #fff; }
  .container { width: 100%; max-width: 900px; background: #1e1e2f; border-radius: 16px; padding: 30px; box-shadow: 0 15px 50px rgba(0,0,0,0.5); display: flex; flex-direction: column; gap: 20px; }

  h1 { text-align: center; color: #00ffcc; font-size: 2.2rem; margin-bottom: 20px; }

  .tabs { display: flex; justify-content: center; gap: 20px; margin-bottom: 20px; }
  .tab-btn { padding: 10px 25px; border-radius: 8px; border: none; cursor: pointer; font-weight: 600; background:#2a2a3d; color:#fff; transition:0.3s; }
  .tab-btn.active { background:#00ffcc; color:#121212; }
  .tab-btn:hover { background:#00d4aa; color:#121212; }

  .tab-content { display: none; flex-direction: column; align-items: center; gap: 20px; }
  .tab-content.active { display: flex; }

  .controls { display: flex; flex-direction: column; align-items: center; gap: 10px; }
  input, select, button, textarea { width: 80%; max-width: 400px; padding: 12px 15px; border-radius: 8px; border: none; font-size: 1rem; background: #2a2a3d; color: #fff; }
  input::placeholder, textarea::placeholder { color: #bbb; }
  button { background: #00ffcc; color: #121212; font-weight: 600; cursor: pointer; transition: 0.3s; }
  button:hover { background: #00d4aa; }

  .barcode-wrapper, .batch-wrapper { display: flex; justify-content: center; align-items: center; flex-direction: column; gap: 20px; width:100%; }
  svg { max-width: 90%; background: #fff; border-radius: 8px; padding: 10px; }
  .batch-grid { display: grid; grid-template-columns: repeat(auto-fill,minmax(180px,1fr)); gap: 15px; max-height: 400px; overflow-y: auto; padding: 10px; width:100%; }

  .coffee-button { text-decoration: none; background: #ff813f; color: #fff; padding: 10px 20px; border-radius: 8px; font-weight: 600; transition: 0.3s; margin-top: 15px; }
  .coffee-button:hover { background: #e67633; }

  .developer-bottom { font-size: 0.85rem; color: #00ffcc; text-align: center; margin-top: 20px; }
  .developer-bottom a { color: #00ffcc; text-decoration: none; }
  .developer-bottom a:hover { text-decoration: underline; }
</style>
</head>
<body>

<div class="container">
  <h1>Barcode Generator</h1>

  <!-- Tabs -->
  <div class="tabs">
    <button class="tab-btn active" onclick="showTab('single')">Single Barcode</button>
    <button class="tab-btn" onclick="showTab('batch')">Batch Generator</button>
  </div>

  <!-- Single Barcode Tab -->
  <div class="tab-content active" id="single">
    <div class="controls">
      <input type="text" id="codeInput" placeholder="Enter text or number">
      <select id="barcodeType">
        <option value="CODE128">CODE128</option>
        <option value="CODE39">CODE39</option>
        <option value="EAN13">EAN13</option>
        <option value="UPC">UPC</option>
      </select>
      <button onclick="downloadBarcode()">Download PNG</button>
      <a href="https://paypal.me/rolik197" target="_blank" class="coffee-button">Buy Me a Coffee</a>
    </div>
    <div class="barcode-wrapper">
      <svg id="barcode"></svg>
    </div>
  </div>

  <!-- Batch Barcode Tab -->
  <div class="tab-content" id="batch">
    <div class="controls">
      <textarea id="batchInput" rows="5" placeholder="Enter up to 10 codes, one per line"></textarea>
      <select id="batchType">
        <option value="CODE128">CODE128</option>
        <option value="CODE39">CODE39</option>
        <option value="EAN13">EAN13</option>
        <option value="UPC">UPC</option>
      </select>
      <button onclick="generateBatch()">Generate Batch</button>
      <button onclick="downloadBatch()">Download All as ZIP</button>
    </div>
    <div class="batch-wrapper">
      <div class="batch-grid" id="batchGrid"></div>
    </div>
  </div>

  <div class="developer-bottom">Developed by <a href="mailto:l0n3.w0lf.dev@gmail.com">L0n3W0lf</a></div>
</div>

<script>
function showTab(tab){
  document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));
  document.getElementById(tab).classList.add('active');
  document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
  event.target.classList.add('active');
}

// Single Barcode
const codeInput = document.getElementById('codeInput');
const barcodeType = document.getElementById('barcodeType');
const barcode = document.getElementById('barcode');

function generateBarcode(){
  const value = codeInput.value.trim();
  const type = barcodeType.value;
  if(value){ 
    JsBarcode(barcode,value,{format:type,lineColor:"#000",width:2,height:150,displayValue:true,fontSize:18,margin:10}); 
  } else { 
    barcode.innerHTML=''; 
  }
}

codeInput.addEventListener('input', generateBarcode);
barcodeType.addEventListener('change', generateBarcode);

function downloadBarcode(){
  if(!codeInput.value.trim()){ alert("Please enter a value first!"); return; }
  const serializer=new XMLSerializer();
  const svgStr=serializer.serializeToString(barcode);
  const canvas=document.createElement("canvas");
  const ctx=canvas.getContext("2d");
  const img=new Image();
  img.onload=function(){ canvas.width=img.width; canvas.height=img.height; ctx.drawImage(img,0,0); const link=document.createElement("a"); link.href=canvas.toDataURL("image/png"); link.download="barcode.png"; link.click(); };
  img.src='data:image/svg+xml;base64,'+btoa(svgStr);
}

// Batch Barcode
async function generateBatch(){
  const codes=document.getElementById('batchInput').value.trim().split('\n').slice(0,10);
  const type=document.getElementById('batchType').value;
  const grid=document.getElementById('batchGrid');
  grid.innerHTML='';
  codes.forEach(code=>{
    const svg=document.createElementNS("http://www.w3.org/2000/svg","svg");
    JsBarcode(svg,code,{format:type,lineColor:"#000",width:2,height:100,displayValue:true,fontSize:14,margin:5});
    grid.appendChild(svg);
  });
}

async function downloadBatch(){
  const grid=document.getElementById('batchGrid');
  if(!grid.children.length){ alert("Generate barcodes first!"); return; }
  const zip=new JSZip();
  for(let i=0;i<grid.children.length;i++){
    const serializer=new XMLSerializer();
    const svgStr=serializer.serializeToString(grid.children[i]);
    const canvas=document.createElement("canvas");
    const ctx=canvas.getContext("2d");
    const img=new Image();
    await new Promise(resolve=>{
      img.onload=function(){ canvas.width=img.width; canvas.height=img.height; ctx.drawImage(img,0,0); canvas.toBlob(blob=>{ zip.file(`barcode_${i+1}.png`,blob); resolve(); }); };
      img.src='data:image/svg+xml;base64,'+btoa(svgStr);
    });
  }
  zip.generateAsync({type:"blob"}).then(function(content){ const link=document.createElement("a"); link.href=URL.createObjectURL(content); link.download="batch_barcodes.zip"; link.click(); });
}
</script>

</body>
</html>
